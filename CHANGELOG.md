# 更新日志

## [0.3.0] - 2025-12-01

### ✨ 新增功能

#### 智能时长自动更新

- 🤖 **自动计算时长**：添加新日志时，自动计算并更新当天上一条日志的实际时长
- ⏱️ **精确计算**：基于时间戳差值自动计算，无需手动估计
- 📊 **智能更新**：只更新同一天内的日志，保持数据逻辑一致性
- 💬 **友好提示**：在控制台显示自动更新的信息

#### 工作原理

当你记录新活动时：
1. 系统查找当天最近的一条日志
2. 计算两条日志之间的时间差（分钟）
3. 自动更新上一条日志的时长字段
4. 显示更新信息

```bash
💾 保存到数据库...
⏱  已自动更新上一条日志 (ID: 5) 的时长：45 分钟
✅ 日志已保存！ (ID: 6)
```

### 📚 新增文档

- **AUTO_DURATION_UPDATE.md** - 自动时长更新功能详细说明

### 🔧 API 改进

新增数据库操作方法：
- `auto_update_previous_log_duration()` - 自动更新上一条日志时长
- `update_log_duration()` - 手动更新日志时长
- `get_last_log_of_day()` - 获取指定日期的最后一条日志

### 💡 使用场景

这个功能特别适合：
- 📖 连续的学习或工作追踪
- 🎯 项目时间管理
- 📈 日常活动时间分析
- 💼 工作效率统计

---

## [0.2.0] - 2025-11-27

### ✨ 新增功能

#### 交互编辑模式（默认）

- 🎨 **默认进入交互编辑模式**：运行 `logger add` 时，现在默认进入友好的交互界面
- 📝 **多次粘贴支持**：可以在一次会话中多次粘贴文字和图片
- 🔄 **内容合并**：所有粘贴的内容会自动合并后一起发送给 AI 分析
- ⌨️ **灵活的完成方式**：支持输入 `done` 或按 `Ctrl+D` 完成输入

#### 使用方式

```bash
# 新的默认行为（交互模式）
uv run logger add

# 如果想使用旧的行为（快速模式）
uv run logger add --no-edit

# 或使用参数直接指定内容
uv run logger add --text "内容" --image "图片.png"
```

### 📚 新增文档

- **INTERACTIVE_MODE_GUIDE.md** - 交互模式详细使用指南（266 行）
- **USAGE_EXAMPLES.md** - 实际使用示例集合（195 行）
- **CHANGELOG.md** - 本文档，更新日志

### 🔧 改进

- 更新 README.md，添加交互模式说明
- 更新 QUICKSTART.md，重点介绍交互模式
- 优化命令行帮助信息
- 添加文档索引，便于查找

### 💡 使用建议

**适合使用交互模式的场景：**
- 记录包含多个部分的学习笔记
- 工作任务需要同时记录文字和截图
- 需要从不同来源收集信息

**适合使用快速模式的场景：**
- 快速记录单一内容
- 已经在剪贴板准备好了所有内容
- 使用脚本自动化记录

### 📊 文档统计

| 文档 | 行数 | 说明 |
|------|------|------|
| README.md | 345 | 完整文档 |
| QUICKSTART.md | 286 | 快速入门 |
| INTERACTIVE_MODE_GUIDE.md | 266 | 交互模式指南 ⭐ |
| USAGE_EXAMPLES.md | 195 | 使用示例 |
| PROJECT_SUMMARY.md | 166 | 项目摘要 |
| SETUP_INSTRUCTIONS.md | 114 | 安装说明 |
| **总计** | **1372** | 6 个文档 |

---

## [0.1.0] - 2025-11-27

### 🎉 首次发布

#### 核心功能

- ✅ Gemini API 集成（多模态分析）
- ✅ SQLite 数据库存储
- ✅ 剪贴板文字和图片读取
- ✅ 命令行工具（add/list/stats/web）
- ✅ Web 界面（时间线 + 统计）
- ✅ 智能分类和标签提取
- ✅ 时间耗时估算

#### 命令行工具

- `logger add` - 添加日志
- `logger list` - 查询日志
- `logger stats` - 统计分析
- `logger web` - Web 界面

#### 技术栈

- Python 3.10+
- SQLAlchemy + SQLite
- FastAPI + Jinja2
- Click + Rich
- Google Generative AI

#### 项目统计

- 12 个 Python 文件
- ~1045 行代码
- 48 个依赖包
- 3 个 HTML 模板
- 1 个 CSS 文件（300+ 行）

---

## 计划中的功能

### v0.3.0（未来）

- [ ] 日志编辑功能
- [ ] 导出功能（CSV/JSON/PDF）
- [ ] 高级搜索
- [ ] 自定义分类
- [ ] 更多图表类型
- [ ] 多图片支持（完整）
- [ ] 数据同步功能

### v0.4.0（未来）

- [ ] 移动端支持
- [ ] 插件系统
- [ ] API 接口
- [ ] 主题切换
- [ ] 多语言支持

---

**贡献者**: Better

**项目状态**: ✅ 生产就绪

**文档完整度**: ⭐⭐⭐⭐⭐

